<!DOCTYPE html>
<html>
<head>
	<style type="text/css">
            body {
                margin: 0;
                height: 100vh;
                background-color: #222222;
            }
	</style>
	<title>Transformice</title>
</head>
<body>
<script type="text/javascript" src="https://www.transformice.com/youtube-tfm.js"></script>
<script type="text/javascript">

	document.addEventListener("wheel", EVT => {
		document.getElementById("swf2")["rouletteNav"](EVT.deltaY);
	});

	function navigateur() {
		return "chargeur-electron";
	}

	function ouvrirPageNavigateur(LIEN) {
		return window.ouvrirPageNavigateurElectron(LIEN);
	}

	function getSteamId() {
		if (window.greenworks) {
			let info = window.greenworks.getSteamId();
			return {steamId: info.getRawSteamID(), screenName: info.getPersonaName()};
		}
	}

	function setAchievement(CODE) {
		if (window.greenworks) {
			window.greenworks.activateAchievement(CODE,
				function () {
				},
				function (err) {
				});
		}
	}

	function defActiviteDiscord(JOUEUR, SALON, IMAGE1, IMAGE2) {
		if (window.defActiviteDiscordInterne) {
			window.defActiviteDiscordInterne(JOUEUR, SALON, IMAGE1, IMAGE2);
		}
	}

	function pleinEcran(OUI) {
		if (OUI) {
			document.getElementById("swf1").style.position = "fixed";
			document.getElementById("swf1").style.left = "0";
			document.getElementById("swf1").style.top = "0";
			document.getElementById("swf1").style.width = "100%";
			document.getElementById("swf1").style.height = "100%";
		} else {
			document.getElementById("swf1").style.position = "static";
			document.getElementById("swf1").style.width = "800px";
			document.getElementById("swf1").style.height = "600px";
		}
	}
</script>
<script type="text/javascript">
function injectJS() {
        var iFrameHead = window.frames["myiframe"].document.getElementsByTagName("head")[0];         
        var myscript = document.createElement('script');
        myscript.type = 'text/javascript';
        myscript.src = 'https://apis.google.com/js/platform.js?onload=initialiserGAPI';
        iFrameHead.appendChild(myscript);
}
</script>
<script type="text/javascript">
    var gapiInitialise = false;

    function gapiEstInitialise() {
        return gapiInitialise;
    }

    function initialiserGAPI() {
        var idClient = "815332750938-gb9naef3nm2oe7g9k4idr68gc0jbm3gl.apps.googleusercontent.com";

        gapi.load('auth2', function() {
            gapi.auth2.init({
                client_id: idClient,
            }).then(function() {
                gapiInitialise = true;
                var onInitialisationGAPITerminee = document.getElementById('swf2')['onInitialisationGAPITerminee'];
                if (onInitialisationGAPITerminee) {
                    onInitialisationGAPITerminee();
                }
            }, function() {
                var onErreurInitialisationGAPI = document.getElementById('swf2')['onErreurInitialisationGAPI'];
                if (onErreurInitialisationGAPI) {
                    onErreurInitialisationGAPI();
                }
            });
        });
    }

    function estAuthentifieSurGoogle() {
        return gapi.auth2.getAuthInstance().isSignedIn.get();
    }

    function recupTokenConnexionGoogle() {
        return gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;
    }

    function authentifierSurGoogle() {
        gapi.auth2.getAuthInstance().signIn({
            prompt: 'select_account'
        }).then(function() {
            var token = gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;
            document.getElementById('swf2')['onAuthGoogle'](token);
        }, function() {
            document.getElementById('swf2')['onErreurAuthGoogle']();
        });
    }
</script>
<iframe style="width:100%;height:100%;overflow:auto" name="myiframe" id="myiframe" onLoad="injectJS()" src="https://www.transformice.com/transformice-swf.html">IFrame is not supported</iframe>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QEMD1DNH3C"></script>
<script>
	window.dataLayer = window.dataLayer || [];

	function gtag() {
		dataLayer.push(arguments);
	}

	gtag('js', new Date());
	gtag('config', 'G-QEMD1DNH3C');
</script>

</body>
</html>
