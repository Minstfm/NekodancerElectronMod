<!DOCTYPE html>
<html>
<head>
	<style type="text/css">
            body {
                margin: 0;
                height: 100vh;
                background-color: #222222;
            }
	</style>
	<title>Transformice</title>
</head>
<body>
<script type="text/javascript" src="https://www.transformice.com/youtube-tfm.js"></script>
<script type="text/javascript">

	document.addEventListener("wheel", EVT => {
		document.getElementById("swf2")["rouletteNav"](EVT.deltaY);
	});

	function navigateur() {
		return "chargeur-electron";
	}

	function ouvrirPageNavigateur(LIEN) {
		return window.ouvrirPageNavigateurElectron(LIEN);
	}

	function getSteamId() {
		if (window.greenworks) {
			let info = window.greenworks.getSteamId();
			return {steamId: info.getRawSteamID(), screenName: info.getPersonaName()};
		}
	}

	function setAchievement(CODE) {
		if (window.greenworks) {
			window.greenworks.activateAchievement(CODE,
				function () {
				},
				function (err) {
				});
		}
	}

	function defActiviteDiscord(JOUEUR, SALON, IMAGE1, IMAGE2) {
		if (window.defActiviteDiscordInterne) {
			window.defActiviteDiscordInterne(JOUEUR, SALON, IMAGE1, IMAGE2);
		}
	}

	function pleinEcran(OUI) {
		if (OUI) {
			document.getElementById("swf1").style.position = "fixed";
			document.getElementById("swf1").style.left = "0";
			document.getElementById("swf1").style.top = "0";
			document.getElementById("swf1").style.width = "100%";
			document.getElementById("swf1").style.height = "100%";
		} else {
			document.getElementById("swf1").style.position = "static";
			document.getElementById("swf1").style.width = "800px";
			document.getElementById("swf1").style.height = "600px";
		}
	}
</script>
<div id="transformice" style="width:100%;height:100%;">
	<object
		id="swf1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
		width="100%"
		height="100%"
		align="middle">
		<param name="allowScriptAccess" value="always"/>
		<param name="movie" value="https://www.transformice.com/TransformiceChargeur.swf"/>
		<param name="menu" value="true"/>
		<param name="quality" value="high"/>
		<param name="bgcolor" value="#6A7495"/>
		<embed
			id="swf2"
			src="https://www.transformice.com/TransformiceChargeur.swf"
			wmode="direct"
			menu="true"
			quality="high"
			bgcolor="#6A7495"
			width="100%"
			height="100%"
			name="Transformice"
			align="middle"
			swLiveConnect="true"
			allowFullScreen="true"
			allowScriptAccess="always"
			type="application/x-shockwave-flash"
		/>
	</object>
</div>

<script src="https://apis.google.com/js/platform.js?onload=initialiserGAPI" async defer></script>
<script type="text/javascript">
    var gapiInitialise = false;

    function gapiEstInitialise() {
        return gapiInitialise;
    }

    function initialiserGAPI() {
        var idClient = "815332750938-gb9naef3nm2oe7g9k4idr68gc0jbm3gl.apps.googleusercontent.com";

        gapi.load('auth2', function() {
            gapi.auth2.init({
                client_id: idClient,
            }).then(function() {
                gapiInitialise = true;
                var onInitialisationGAPITerminee = document.getElementById('swf2')['onInitialisationGAPITerminee'];
                if (onInitialisationGAPITerminee) {
                    onInitialisationGAPITerminee();
                }
            }, function() {
                var onErreurInitialisationGAPI = document.getElementById('swf2')['onErreurInitialisationGAPI'];
                if (onErreurInitialisationGAPI) {
                    onErreurInitialisationGAPI();
                }
            });
        });
    }

    function estAuthentifieSurGoogle() {
        return gapi.auth2.getAuthInstance().isSignedIn.get();
    }

    function recupTokenConnexionGoogle() {
        return gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;
    }

    function authentifierSurGoogle() {
        gapi.auth2.getAuthInstance().signIn({
            prompt: 'select_account'
        }).then(function() {
            var token = gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().id_token;
            document.getElementById('swf2')['onAuthGoogle'](token);
        }, function() {
            document.getElementById('swf2')['onErreurAuthGoogle']();
        });
    }
</script>
	
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QEMD1DNH3C"></script>
<script>
	window.dataLayer = window.dataLayer || [];

	function gtag() {
		dataLayer.push(arguments);
	}

	gtag('js', new Date());
	gtag('config', 'G-QEMD1DNH3C');
</script>

</body>
</html>
